import pygame
import sys

pygame.init()

# Configuración de la ventana
ANCHO, ALTO = 800, 600
ventana = pygame.display.set_mode((ANCHO, ALTO))
pygame.display.set_caption("Rectángulo con Rastro")

# Colores
AZUL = (0, 0, 255)
ROJO = (255, 0, 0)
BLANCO = (255, 255, 255)

# Configuración del rectángulo
RECT_ANCHO = 40
RECT_ALTO = 40
rect_x = ANCHO // 2 - RECT_ANCHO // 2
rect_y = ALTO // 2 - RECT_ALTO // 2
VELOCIDAD = 5

# Configuración del rastro
rastro = []  # Lista para almacenar las posiciones del rastro
GROSOR_LINEA = 2  # Grosor de la línea del rastro

# Reloj para controlar la frecuencia de actualización
reloj = pygame.time.Clock()

while True:
    for evento in pygame.event.get():
        if evento.type == pygame.QUIT:
            pygame.quit()
            sys.exit()
        if evento.type == pygame.KEYDOWN:
            if evento.key == pygame.K_ESCAPE:
                pygame.quit()
                sys.exit()
    
    # Obtener las teclas presionadas
    teclas = pygame.key.get_pressed()
    
    # Movimiento del rectángulo
    if teclas[pygame.K_LEFT]:
        rect_x = max(0, rect_x - VELOCIDAD)
    if teclas[pygame.K_RIGHT]:
        rect_x = min(ANCHO - RECT_ANCHO, rect_x + VELOCIDAD)
    if teclas[pygame.K_UP]:
        rect_y = max(0, rect_y - VELOCIDAD)
    if teclas[pygame.K_DOWN]:
        rect_y = min(ALTO - RECT_ALTO, rect_y + VELOCIDAD)
    
    # Agregar nueva posición al rastro si el rectángulo se mueve
    if teclas[pygame.K_LEFT] or teclas[pygame.K_RIGHT] or teclas[pygame.K_UP] or teclas[pygame.K_DOWN]:
        centro_x = rect_x + RECT_ANCHO // 2
        centro_y = rect_y + RECT_ALTO // 2
        rastro.append((centro_x, centro_y))
    
    # Dibujar
    ventana.fill(BLANCO)
    
    # Dibujar el rastro como una línea continua
    if len(rastro) > 1:
        pygame.draw.lines(ventana, ROJO, False, rastro, GROSOR_LINEA)
    
    # Dibujar el rectángulo
    pygame.draw.rect(ventana, AZUL, (rect_x, rect_y, RECT_ANCHO, RECT_ALTO))
    
    pygame.display.flip()
    reloj.tick(144)  # 60 FPS
